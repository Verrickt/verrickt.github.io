<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  
  <title>PAT 1097 Deduplication on a Linked List | Melchior on CLR</title>
  <meta name="description" content="A programmer focus mainly on Microsoft Technologies" />
  <meta name="keywords" content="Windows desktop,C#,XAML,UWP,WPF,OpenSource,GNU/Linux,CLI" />
  <meta name="HandheldFriendly" content="True" />
  <meta name="apple-mobile-web-app-capable" content="yes">
  <link rel="shortcut icon" href="/">
  <link rel="alternate" href="/atom.xml" title="Melchior on CLR">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="Deduplication on a Linked ListGiven a singly linked list L with integer keys, you are supposed to remove the nodes with duplicated absolute values of the keys. That is, for each value K, only the firs">
<meta name="keywords" content="PAT">
<meta property="og:type" content="article">
<meta property="og:title" content="PAT 1097 Deduplication on a Linked List">
<meta property="og:url" content="https://verrickt.github.io/2020/04/03/PAT-1097-Deduplication-on-a-Linked-List/index.html">
<meta property="og:site_name" content="Melchior on CLR">
<meta property="og:description" content="Deduplication on a Linked ListGiven a singly linked list L with integer keys, you are supposed to remove the nodes with duplicated absolute values of the keys. That is, for each value K, only the firs">
<meta property="og:locale" content="zh-CN,en-US">
<meta property="og:updated_time" content="2020-04-03T06:15:54.728Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="PAT 1097 Deduplication on a Linked List">
<meta name="twitter:description" content="Deduplication on a Linked ListGiven a singly linked list L with integer keys, you are supposed to remove the nodes with duplicated absolute values of the keys. That is, for each value K, only the firs">
    
  <link href="https://fonts.googleapis.com/css?family=Inconsolata|Titillium+Web" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css?family=Roboto+Mono" rel="stylesheet">
  <link href='//cdn.bootcss.com/node-waves/0.7.5/waves.min.css' rel='stylesheet'>
  <link rel="stylesheet" href="/style.css">
  <script>
    function setLoadingBarProgress(num) {
      document.getElementById('loading-bar').style.width=num+"%";
    }
  </script>
</head>

<body>
  <div id="loading-bar-wrapper">
  <div id="loading-bar"></div>
</div>


  <script>setLoadingBarProgress(20)</script> 
  <header class="l_header">
	<div class='wrapper'>
		<div class="nav-main container container--flex">
			<a class="logo flat-box" href='/' >
				Melchior on CLR
			</a>
			<div class='menu'>
				<ul class='h-list'>
					
						<li>
							<a class='flat-box nav-home' href='/'>
								Home
							</a>
						</li>
					
						<li>
							<a class='flat-box nav-archives' href='/archives'>
								Archives
							</a>
						</li>
					
						<li>
							<a class='flat-box nav-about' href='/about'>
								About
							</a>
						</li>
					
				</ul>
				<div class='underline'></div>
			</div>
			
				<div class="m_search">
					<form name="searchform" class="form u-search-form">
						<input type="text" class="input u-search-input" placeholder="Search" />
						<span class="icon icon-search"></span>
					</form>
				</div>
			
			<ul class='switcher h-list'>
				
					<li class='s-search'><a href='javascript:void(0)'><span class="icon icon-search flat-box"></span></a></li>
				
				<li class='s-menu'><a href='javascript:void(0)'><span class="icon icon-menu flat-box"></span></a></li>
			</ul>
		</div>
		
		<div class='nav-sub container container--flex'>
			<a class="logo" class="flat-box" href='javascript:void(0)'>
				Word of Forks
			</a>

			<ul class='switcher h-list'>
				<li class='s-comment'><a href='javascript:void(0)'><span class="icon icon-chat_bubble_outline flat-box"></span></a></li>
				<li class='s-top'><a href='javascript:void(0)'><span class="icon icon-arrow_upward flat-box"></span></a></li>
				<li class='s-toc'><a href='javascript:void(0)'><span class="icon icon-format_list_numbered flat-box"></span></a></li>
			</ul>
		</div>
	</div>
</header>
<aside class="menu-phone">
	<nav>
		
			<a href="/" class="nav-home nav">
				Home
			</a>
		
			<a href="/archives" class="nav-archives nav">
				Archives
			</a>
		
			<a href="/about" class="nav-about nav">
				About
			</a>
		
	</nav>
</aside>

    <script>setLoadingBarProgress(40);</script>
  <div class="l_body">
    <div class='container clearfix'>
      <div class='l_main'>
        <article id="post-PAT-1097-Deduplication-on-a-Linked-List"
  class="post white-box article-type-post"
  itemscope itemprop="blogPost">
	<section class='meta'>
	<h2 class="title">
  	<a href="/2020/04/03/PAT-1097-Deduplication-on-a-Linked-List/">
    	PAT 1097 Deduplication on a Linked List
    </a>
  </h2>
	<time>
	  Apr 3, 2020
	</time>
	
	</section>
	
		<section class="toc-wrapper"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#Deduplication-on-a-Linked-List"><span class="toc-number">1.</span> <span class="toc-text">Deduplication on a Linked List</span></a></li></ol></section>
	
	<section class="article typo">
  	<div class="article-entry" itemprop="articleBody">
    	<h2 id="Deduplication-on-a-Linked-List"><a href="#Deduplication-on-a-Linked-List" class="headerlink" title="Deduplication on a Linked List"></a>Deduplication on a Linked List</h2><p>Given a singly linked list L with integer keys, you are supposed to remove the nodes with duplicated absolute values of the keys. That is, for each value K, only the first node of which the value or absolute value of its key equals K will be kept. At the mean time, all the removed nodes must be kept in a separate list. For example, given L being <code>21→-15→-15→-7→15</code>, you must output <code>21→-15→-7</code>, and the removed list <code>-15→15</code>.</p>
<a id="more"></a>
<p><strong>Input Specification</strong></p>
<p>Each input file contains one test case. For each case, the first line contains the address of the first node, and a positive N (≤10^​5​​) which is the total number of nodes. The address of a node is a 5-digit nonnegative integer, and NULL is represented by −1.</p>
<p>Then N lines follow, each describes a node in the format:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">Address Key Next</div></pre></td></tr></table></figure></p>
<p>where Address is the position of the node, Key is an integer of which absolute value is no more than 10​^4​​, and Next is the position of the next node.</p>
<p><strong>Output Specification</strong></p>
<p>For each case, output the resulting linked list first, then the removed list. Each node occupies a line, and is printed in the same format as in the input.</p>
<p><strong>Sample Input</strong><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">00100 5</div><div class="line">99999 -7 87654</div><div class="line">23854 -15 00000</div><div class="line">87654 15 -1</div><div class="line">00000 -15 99999</div><div class="line">00100 21 23854</div></pre></td></tr></table></figure></p>
<p><strong>Sample Output</strong><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">00100 21 23854</div><div class="line">23854 -15 99999</div><div class="line">99999 -7 -1</div><div class="line">00000 -15 87654</div><div class="line">87654 15 -1</div></pre></td></tr></table></figure></p>
<hr>
<p>类似<a href="https://www.liuchuo.net/archives/2118" target="_blank" rel="external">这样</a>的骚操作网上有很多，这里不在引用。本文主要考虑常规思路。思路非常简单，便利链表，如果曾经出现过就插入另一个链表，没出现过就继续，最后得到两个链表，分别是去重后的和重复的。看似比较简单，想把所有情况考虑全也是要花点心思的。</p>
<ul>
<li>重复部分的链表是和原链表顺序是一样的，采用尾插法。需要头、尾两个指针。</li>
<li>原链表的头节点是第一个节点，不可能被放入重复链表，那么去重后的链表头节点不变。</li>
<li>遍历过程中需要将节点删除(即插入重复链表)，所以需要<code>prev</code>指针记录去重链表的上一个节点地址，以便修改<code>next</code>指针。</li>
</ul>
<p>如果你像我一样以为上面的描述就把所有的情况都考虑完全了，那么欢迎你和我来到BUG的海洋😉</p>
<p>先来看AC的代码</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"vector"</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"iostream"</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"algorithm"</span></span></div><div class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</div><div class="line"><span class="class"><span class="keyword">struct</span> <span class="title">node</span></span></div><div class="line"><span class="class">&#123;</span></div><div class="line">	<span class="keyword">int</span> addr;</div><div class="line">	<span class="keyword">int</span> key; </div><div class="line">	<span class="keyword">int</span> next;</div><div class="line">&#125;;</div><div class="line">node nodes[<span class="number">100086</span>];</div><div class="line"><span class="keyword">bool</span> <span class="built_in">map</span>[<span class="number">10024</span>];</div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">print</span><span class="params">(<span class="keyword">int</span> head)</span></span></div><div class="line"><span class="function"></span>&#123;</div><div class="line">	<span class="keyword">auto</span> cur = head;</div><div class="line">	<span class="keyword">while</span> (cur != <span class="number">-1</span>)</div><div class="line">	&#123;</div><div class="line">		<span class="keyword">if</span> (nodes[cur].next != <span class="number">-1</span>)</div><div class="line">			<span class="built_in">printf</span>(<span class="string">"%05d %d %05d\n"</span>, cur, nodes[cur].key, nodes[cur].next);</div><div class="line">		<span class="keyword">else</span> <span class="built_in">printf</span>(<span class="string">"%05d %d -1\n"</span>, cur, nodes[cur].key);</div><div class="line">		cur = nodes[cur].next;</div><div class="line">	&#125;</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></div><div class="line"><span class="function"></span>&#123;</div><div class="line">	<span class="keyword">int</span> head, n;</div><div class="line">	<span class="built_in">cin</span> &gt;&gt; head &gt;&gt; n;</div><div class="line">	<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; i++)</div><div class="line">	&#123;</div><div class="line">		<span class="keyword">int</span> id;</div><div class="line">		<span class="built_in">cin</span> &gt;&gt; id;</div><div class="line">		nodes[id].addr = id;</div><div class="line">		<span class="built_in">cin</span> &gt;&gt; nodes[id].key &gt;&gt; nodes[id].next;</div><div class="line">	&#125;</div><div class="line">	fill(<span class="built_in">map</span>, <span class="built_in">map</span> + <span class="number">10024</span>, <span class="literal">false</span>);</div><div class="line">	<span class="keyword">int</span> dupli_head = <span class="number">-1</span>;</div><div class="line">	<span class="keyword">int</span> dupli_tail = <span class="number">-1</span>;</div><div class="line">	<span class="keyword">int</span> cur = head;</div><div class="line">	<span class="keyword">int</span> prev = <span class="number">-1</span>;</div><div class="line">	<span class="keyword">while</span> (cur != <span class="number">-1</span>)</div><div class="line">	&#123;</div><div class="line">		<span class="keyword">while</span> (<span class="built_in">map</span>[<span class="built_in">abs</span>(nodes[cur].key)])</div><div class="line">		&#123;</div><div class="line">			<span class="keyword">int</span> next = nodes[cur].next;</div><div class="line">			<span class="keyword">if</span> (dupli_head == <span class="number">-1</span>) dupli_head = dupli_tail = cur;</div><div class="line">			<span class="keyword">else</span></div><div class="line">			&#123;</div><div class="line">				nodes[dupli_tail].next = cur;</div><div class="line">				dupli_tail = cur;</div><div class="line">				nodes[cur].next = <span class="number">-1</span>;</div><div class="line">			&#125;</div><div class="line">			cur = next;</div><div class="line">			<span class="keyword">if</span> (cur == <span class="number">-1</span>) <span class="keyword">break</span>;</div><div class="line">		&#125;</div><div class="line">		<span class="keyword">if</span> (cur == <span class="number">-1</span>) &#123; nodes[prev].next = <span class="number">-1</span>; <span class="keyword">break</span>; &#125;</div><div class="line">		<span class="keyword">if</span> (prev != <span class="number">-1</span>) nodes[prev].next = cur;</div><div class="line">		<span class="built_in">map</span>[<span class="built_in">abs</span>(nodes[cur].key)] = <span class="literal">true</span>;</div><div class="line">		prev = cur;</div><div class="line">		cur = nodes[cur].next;</div><div class="line">	&#125;</div><div class="line">	print(head);</div><div class="line">	print(dupli_head);</div><div class="line">	<span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<blockquote>
<p>为啥<code>while</code>循环里又套了个<code>while</code>循环，用<code>if</code>不就够了么？</p>
</blockquote>
<p>此乃第一坑😉<br>上文说到</p>
<blockquote>
<p><code>prev</code>指针记录去重链表的上一个节点地址</p>
</blockquote>
<p>那么<code>prev</code>的<code>next</code>应该是<strong>去重链表</strong>的下一个地址。而<code>if</code>得到的仅仅是下一个地址，此时还不知道他是否属于<strong>去重链表</strong>。这时不能做<code>prev.next=cur</code>。那什么时候可以呢？当然是<code>map[abs(nodes[cur].key)</code>为假啦。</p>
<blockquote>
<p>好多<code>-1</code>看的我头晕</p>
</blockquote>
<p>恭喜你，进入了第二坑😉</p>
<ol>
<li><p><code>dupli_head</code>和<code>dupli_tail</code>是头尾指针，<code>-1</code>作为链表为空时的特殊值。</p>
</li>
<li><p>插入<code>dupli</code>链表后，要把<code>cur.next</code>置为<code>-1</code>，表示这是新链表的最后一个节点。为防止链表断裂，用<code>next=cur.next</code>记住下一个地址。</p>
</li>
<li><p>插入重复链表是在<code>while</code>循环里进行的，那么就有可能在这里耗光所有的元素。此即<code>if (cur == -1) break;</code>。</p>
</li>
<li><p>当在<code>while</code>循环里耗尽所有元素后，已经不可能有新的元素可以作为<code>prev.next</code>，因此<code>if (cur == -1) { nodes[prev].next = -1; break; }</code></p>
</li>
<li>上文说过，原链表的头节点一定是去重链表的头节点。那么当刚访问过头节点时，是不需要对<code>prev</code>操作的。即<code>if (prev != -1) nodes[prev].next = cur;</code>。当然，你也可以直接跳过头节点<figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">map</span>[head]=<span class="literal">true</span>;</div><div class="line">cur = nodes[head].next;</div><div class="line">prev = head;</div></pre></td></tr></table></figure>
</li>
</ol>
<p>怎么样，还觉得考虑所有情况简单么😉</p>

  	</div>
	  
	  <div class="article-tags tags">
      
        <a href="/tags/PAT/">PAT</a>
      
	  </div>
    
		
	
		<div class="art-item-footer">
				
				
					<span class="art-item-right">next：<a href="/2020/03/23/PAT-1021-Deepest-Root/" rel="next"  title="PAT 1021 Deepest Root">
						PAT 1021 Deepest Root
					</a><i class="icon icon-chevron-thin-right"></i></span>
				
		</div>
	
	</section>
	
		<section id="comments">
			<div id="gitment_thread"></div>
			<link rel="stylesheet" href="https://imsun.github.io/gitment/style/default.css">
			<script src="https://imsun.github.io/gitment/dist/gitment.browser.js"></script>
			<script>
					var gitment = new Gitment({
							id: 'PAT 1097 Deduplication on a Linked List',
							owner: 'verrickt',
							repo: 'verrickt.github.io',
							oauth: {
									client_id: '9a5cc0fe7b4e920d91f3',
									client_secret: 'ae774015efba47b603a7c6540c276f744e32e07d',
							},
					})
					gitment.render('comments')
			</script>
		</section>
	
</article>
<script>
	window.subData = {
		title: 'PAT 1097 Deduplication on a Linked List',
		tools: true
	}
</script>

      </div>
      <aside class='l_side'>
        
  <section class='m_widget about'>

<img class='avatar waves-image' src='https://avatars0.githubusercontent.com/u/11483783' />

<div class='header'>Verrickt</div>
<div class='content'>
<div class='desc'>Von as a programmer</div>
</div>
</section>

  <section class='m_widget links'>
<div class='header'>Links</div>
<div class='content'>
    <ul class="entry">
    
        <li><a class="flat-box" target="_blank" href="https://sjx1995.github.io">
            <div class='name'>Sunly</div>
        </a></li>
    
        <li><a class="flat-box" target="_blank" href="https://liun1an.github.io">
            <div class='name'>LiuN1an</div>
        </a></li>
    
    </ul>
</div>
</section>

  <section class='m_widget categories'>
<div class='header'>Categories</div>
<div class='content'>
    
    <ul class="entry">
    
        <li><a class="flat-box" href="/categories/FluentTreeView/"><div class='name'>FluentTreeView</div><div class='badget'>5</div></a></li>
    
    </ul>
    
</div>
</section>

  
<div class="m_widget tagcloud">
    <div class="header">Tags</div>
    <div class='content'>
        <a href="/tags/Net-Framework/" style="font-size: 14px; color: #808080">.Net Framework</a> <a href="/tags/C/" style="font-size: 18px; color: #2b2b2b">C#</a> <a href="/tags/CPP/" style="font-size: 14px; color: #808080">CPP</a> <a href="/tags/Debugging/" style="font-size: 14px; color: #808080">Debugging</a> <a href="/tags/HttpClient/" style="font-size: 14px; color: #808080">HttpClient</a> <a href="/tags/MSBuild/" style="font-size: 14px; color: #808080">MSBuild</a> <a href="/tags/OOP/" style="font-size: 14px; color: #808080">OOP</a> <a href="/tags/PAT/" style="font-size: 20px; color: #000">PAT</a> <a href="/tags/Parser/" style="font-size: 14px; color: #808080">Parser</a> <a href="/tags/Reentrance/" style="font-size: 14px; color: #808080">Reentrance</a> <a href="/tags/SOLID/" style="font-size: 14px; color: #808080">SOLID</a> <a href="/tags/WPF/" style="font-size: 16px; color: #555">WPF</a> <a href="/tags/async-await/" style="font-size: 14px; color: #808080">async/await</a> <a href="/tags/lambda/" style="font-size: 14px; color: #808080">lambda</a> <a href="/tags/overhead/" style="font-size: 14px; color: #808080">overhead</a> <a href="/tags/reference-type/" style="font-size: 14px; color: #808080">reference type</a>
    </div>
</div>



      </aside>
      <script>setLoadingBarProgress(60);</script>
    </div>
  </div>
  <footer id="footer" class="clearfix">

  <div class="social-wrapper">
    
      
        <a href="https://github.com/verrickt" class="social github" target="_blank" rel="external">
          <span class="icon icon-github"></span>
        </a>
        
        <a href="https://twitter.com/verrickt" class="social twitter" target="_blank" rel="external">
          <span class="icon icon-twitter"></span>
        </a>
        
        <a href="/atom.xml" class="social rss" target="_blank" rel="external">
          <span class="icon icon-rss"></span>
        </a>
        
          
  </div>

  <div>(c) 2017-2018 by verrickt, all right reserved. Powered by
    <a href="https://hexo.io/" class="codename">Hexo</a>. Theme by
    <a href='https://github.com/stkevintan/hexo-theme-material-flow' class="codename">MaterialFlow</a>
    <div>
      <a href="https://creativecommons.org/licenses/by-sa/4.0/" target="_blank">
        <img style="vertical-align: middle" alt="graphical represerentaion of CC BY-SA license" src="https://licensebuttons.net/l/by-sa/3.0/88x31.png"
          height="24.75" width="66">
      </a>
      <span>
        Unless explicitly stated, contents of this blog are licensed under
        <a href="https://creativecommons.org/licenses/by-sa/4.0/" class="codename" target="_blank">CC BY-SA</a>
      </span>
    </div>
</footer>
  <script>setLoadingBarProgress(80);</script>
  

<script src="//apps.bdimg.com/libs/jquery/2.1.4/jquery.min.js"></script>
<script src='//cdn.bootcss.com/node-waves/0.7.5/waves.min.js'></script>
<script src="//cdn.bootcss.com/scrollReveal.js/3.3.2/scrollreveal.min.js"></script>
<script src="/js/jquery.fitvids.js"></script>
<script>
	var GOOGLE_CUSTOM_SEARCH_API_KEY = "";
	var GOOGLE_CUSTOM_SEARCH_ENGINE_ID = "";
	var ALGOLIA_API_KEY = "";
	var ALGOLIA_APP_ID = "";
	var ALGOLIA_INDEX_NAME = "";
  var AZURE_SERVICE_NAME = "";
  var AZURE_INDEX_NAME = "";
  var AZURE_QUERY_KEY = "";
  var BAIDU_API_ID = "";
  var SEARCH_SERVICE = "hexo";
  var ROOT = "/"||"/";
  if(!ROOT.endsWith('/'))ROOT += '/';
</script>
<script src="/js/search.js"></script>
<script src="/js/app.js"></script>


  <script>setLoadingBarProgress(100);</script>
</body>
</html>
