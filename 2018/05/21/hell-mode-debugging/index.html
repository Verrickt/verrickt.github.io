<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  
  <title>è®°ä¸€æ¬¡æ„‰(dan)å¿«(teng)çš„æ‰è™« | Melchior on CLR</title>
  <meta name="description" content="A programmer focus mainly on Microsoft Technologies" />
  <meta name="keywords" content="Windows desktop,C#,XAML,UWP,WPF,OpenSource,GNU/Linux,CLI" />
  <meta name="HandheldFriendly" content="True" />
  <meta name="apple-mobile-web-app-capable" content="yes">
  <link rel="shortcut icon" href="/">
  <link rel="alternate" href="/atom.xml" title="Melchior on CLR">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="åºŸè¯BUGæ˜¯ä»»ä½•è½¯ä»¶éƒ½ä¼šé‡åˆ°çš„é—®é¢˜ã€‚å®ƒé€šå¸¸æ˜¯å¼€å‘äººå‘˜è€ƒè™‘é—®é¢˜ä¸å…¨é¢è€ŒåŸ‹ä¸‹çš„éšå½¢ç‚¸å¼¹ï¼Œåœ¨æ¡ä»¶åˆé€‚çš„æ—¶å€™å°±ä¼šçˆ†ç‚¸ï¼›å¼€å‘è‡ªå·±åŸ‹BUGå¾€å¾€æ¯”è¾ƒå®¹æ˜“é™¤é”™ï¼Œå› ä¸ºä»£ç éƒ½æ˜¯è‡ªå·±å†™çš„ï¼Œå®šä½é—®é¢˜ågit blameä¸€ä¸‹å°±å¯ä»¥ç”©é”…äº†ï¼›è€Œç¨‹åºä¾èµ–é¡¹é‡Œçš„BUGåˆ™æ’æŸ¥èµ·æ¥åˆ™è®©äººä¸€ç­¹è«å±•ï¼Œå°¤å…¶æ˜¯åœ¨æ²¡æœ‰è¶³å¤Ÿå¤šä¿¡æ¯çš„æƒ…å†µã€‚ é¢å¯¹æ¥è‡ªå®¢æˆ·å’ŒQAçš„å‹åŠ›ï¼Œç»å°½è„‘æ±ä»æ— æ³•å®šä½é—®é¢˜å¼€å‘ä»¬åªèƒ½æ‰¾å€Ÿå£äº†ğŸ¤£  Itâ€™s a feature,no">
<meta name="keywords" content="C#,WPF,Debugging">
<meta property="og:type" content="article">
<meta property="og:title" content="è®°ä¸€æ¬¡æ„‰(dan)å¿«(teng)çš„æ‰è™«">
<meta property="og:url" content="https://verrickt.github.io/2018/05/21/hell-mode-debugging/index.html">
<meta property="og:site_name" content="Melchior on CLR">
<meta property="og:description" content="åºŸè¯BUGæ˜¯ä»»ä½•è½¯ä»¶éƒ½ä¼šé‡åˆ°çš„é—®é¢˜ã€‚å®ƒé€šå¸¸æ˜¯å¼€å‘äººå‘˜è€ƒè™‘é—®é¢˜ä¸å…¨é¢è€ŒåŸ‹ä¸‹çš„éšå½¢ç‚¸å¼¹ï¼Œåœ¨æ¡ä»¶åˆé€‚çš„æ—¶å€™å°±ä¼šçˆ†ç‚¸ï¼›å¼€å‘è‡ªå·±åŸ‹BUGå¾€å¾€æ¯”è¾ƒå®¹æ˜“é™¤é”™ï¼Œå› ä¸ºä»£ç éƒ½æ˜¯è‡ªå·±å†™çš„ï¼Œå®šä½é—®é¢˜ågit blameä¸€ä¸‹å°±å¯ä»¥ç”©é”…äº†ï¼›è€Œç¨‹åºä¾èµ–é¡¹é‡Œçš„BUGåˆ™æ’æŸ¥èµ·æ¥åˆ™è®©äººä¸€ç­¹è«å±•ï¼Œå°¤å…¶æ˜¯åœ¨æ²¡æœ‰è¶³å¤Ÿå¤šä¿¡æ¯çš„æƒ…å†µã€‚ é¢å¯¹æ¥è‡ªå®¢æˆ·å’ŒQAçš„å‹åŠ›ï¼Œç»å°½è„‘æ±ä»æ— æ³•å®šä½é—®é¢˜å¼€å‘ä»¬åªèƒ½æ‰¾å€Ÿå£äº†ğŸ¤£  Itâ€™s a feature,no">
<meta property="og:locale" content="zh-CN,en-US">
<meta property="og:image" content="https://verrickt.github.io/2018/05/21/hell-mode-debugging/net472_error.png">
<meta property="og:updated_time" content="2018-08-04T10:24:55.494Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="è®°ä¸€æ¬¡æ„‰(dan)å¿«(teng)çš„æ‰è™«">
<meta name="twitter:description" content="åºŸè¯BUGæ˜¯ä»»ä½•è½¯ä»¶éƒ½ä¼šé‡åˆ°çš„é—®é¢˜ã€‚å®ƒé€šå¸¸æ˜¯å¼€å‘äººå‘˜è€ƒè™‘é—®é¢˜ä¸å…¨é¢è€ŒåŸ‹ä¸‹çš„éšå½¢ç‚¸å¼¹ï¼Œåœ¨æ¡ä»¶åˆé€‚çš„æ—¶å€™å°±ä¼šçˆ†ç‚¸ï¼›å¼€å‘è‡ªå·±åŸ‹BUGå¾€å¾€æ¯”è¾ƒå®¹æ˜“é™¤é”™ï¼Œå› ä¸ºä»£ç éƒ½æ˜¯è‡ªå·±å†™çš„ï¼Œå®šä½é—®é¢˜ågit blameä¸€ä¸‹å°±å¯ä»¥ç”©é”…äº†ï¼›è€Œç¨‹åºä¾èµ–é¡¹é‡Œçš„BUGåˆ™æ’æŸ¥èµ·æ¥åˆ™è®©äººä¸€ç­¹è«å±•ï¼Œå°¤å…¶æ˜¯åœ¨æ²¡æœ‰è¶³å¤Ÿå¤šä¿¡æ¯çš„æƒ…å†µã€‚ é¢å¯¹æ¥è‡ªå®¢æˆ·å’ŒQAçš„å‹åŠ›ï¼Œç»å°½è„‘æ±ä»æ— æ³•å®šä½é—®é¢˜å¼€å‘ä»¬åªèƒ½æ‰¾å€Ÿå£äº†ğŸ¤£  Itâ€™s a feature,no">
<meta name="twitter:image" content="https://verrickt.github.io/2018/05/21/hell-mode-debugging/net472_error.png">
    
  <link href="https://fonts.googleapis.com/css?family=Inconsolata|Titillium+Web" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css?family=Roboto+Mono" rel="stylesheet">
  <link href='//cdn.bootcss.com/node-waves/0.7.5/waves.min.css' rel='stylesheet'>
  <link rel="stylesheet" href="/style.css">
  <script>
    function setLoadingBarProgress(num) {
      document.getElementById('loading-bar').style.width=num+"%";
    }
  </script>
</head>

<body>
  <div id="loading-bar-wrapper">
  <div id="loading-bar"></div>
</div>


  <script>setLoadingBarProgress(20)</script> 
  <header class="l_header">
	<div class='wrapper'>
		<div class="nav-main container container--flex">
			<a class="logo flat-box" href='/' >
				Melchior on CLR
			</a>
			<div class='menu'>
				<ul class='h-list'>
					
						<li>
							<a class='flat-box nav-home' href='/'>
								Home
							</a>
						</li>
					
						<li>
							<a class='flat-box nav-archives' href='/archives'>
								Archives
							</a>
						</li>
					
						<li>
							<a class='flat-box nav-about' href='/about'>
								About
							</a>
						</li>
					
				</ul>
				<div class='underline'></div>
			</div>
			
				<div class="m_search">
					<form name="searchform" class="form u-search-form">
						<input type="text" class="input u-search-input" placeholder="Search" />
						<span class="icon icon-search"></span>
					</form>
				</div>
			
			<ul class='switcher h-list'>
				
					<li class='s-search'><a href='javascript:void(0)'><span class="icon icon-search flat-box"></span></a></li>
				
				<li class='s-menu'><a href='javascript:void(0)'><span class="icon icon-menu flat-box"></span></a></li>
			</ul>
		</div>
		
		<div class='nav-sub container container--flex'>
			<a class="logo" class="flat-box" href='javascript:void(0)'>
				Word of Forks
			</a>

			<ul class='switcher h-list'>
				<li class='s-comment'><a href='javascript:void(0)'><span class="icon icon-chat_bubble_outline flat-box"></span></a></li>
				<li class='s-top'><a href='javascript:void(0)'><span class="icon icon-arrow_upward flat-box"></span></a></li>
				<li class='s-toc'><a href='javascript:void(0)'><span class="icon icon-format_list_numbered flat-box"></span></a></li>
			</ul>
		</div>
	</div>
</header>
<aside class="menu-phone">
	<nav>
		
			<a href="/" class="nav-home nav">
				Home
			</a>
		
			<a href="/archives" class="nav-archives nav">
				Archives
			</a>
		
			<a href="/about" class="nav-about nav">
				About
			</a>
		
	</nav>
</aside>

    <script>setLoadingBarProgress(40);</script>
  <div class="l_body">
    <div class='container clearfix'>
      <div class='l_main'>
        <article id="post-hell-mode-debugging"
  class="post white-box article-type-post"
  itemscope itemprop="blogPost">
	<section class='meta'>
	<h2 class="title">
  	<a href="/2018/05/21/hell-mode-debugging/">
    	è®°ä¸€æ¬¡æ„‰(dan)å¿«(teng)çš„æ‰è™«
    </a>
  </h2>
	<time>
	  May 21, 2018
	</time>
	
	</section>
	
		<section class="toc-wrapper"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#åºŸè¯"><span class="toc-number">1.</span> <span class="toc-text">åºŸè¯</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#èƒŒæ™¯"><span class="toc-number">2.</span> <span class="toc-text">èƒŒæ™¯</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#æ‰è™«"><span class="toc-number">3.</span> <span class="toc-text">æ‰è™«</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#å‡ºå¸ˆä¸åˆ©"><span class="toc-number">3.1.</span> <span class="toc-text">å‡ºå¸ˆä¸åˆ©</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#å¯»æ‰¾åŸå› "><span class="toc-number">3.2.</span> <span class="toc-text">å¯»æ‰¾åŸå› </span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#åˆå…¥å›°å¢ƒ"><span class="toc-number">3.3.</span> <span class="toc-text">åˆå…¥å›°å¢ƒ</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#è½¬æœº"><span class="toc-number">3.4.</span> <span class="toc-text">è½¬æœº</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#å¾®è½¯æ¥èƒŒé”…"><span class="toc-number">3.5.</span> <span class="toc-text">å¾®è½¯æ¥èƒŒé”…</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#åŸå› åˆ†æ"><span class="toc-number">4.</span> <span class="toc-text">åŸå› åˆ†æ</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#æ€»ç»“"><span class="toc-number">5.</span> <span class="toc-text">æ€»ç»“</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Reference"><span class="toc-number">6.</span> <span class="toc-text">Reference</span></a></li></ol></section>
	
	<section class="article typo">
  	<div class="article-entry" itemprop="articleBody">
    	<h2 id="åºŸè¯"><a href="#åºŸè¯" class="headerlink" title="åºŸè¯"></a>åºŸè¯</h2><p>BUGæ˜¯ä»»ä½•è½¯ä»¶éƒ½ä¼šé‡åˆ°çš„é—®é¢˜ã€‚å®ƒé€šå¸¸æ˜¯å¼€å‘äººå‘˜è€ƒè™‘é—®é¢˜ä¸å…¨é¢è€ŒåŸ‹ä¸‹çš„éšå½¢ç‚¸å¼¹ï¼Œåœ¨æ¡ä»¶åˆé€‚çš„æ—¶å€™å°±ä¼šçˆ†ç‚¸ï¼›å¼€å‘è‡ªå·±åŸ‹BUGå¾€å¾€æ¯”è¾ƒå®¹æ˜“é™¤é”™ï¼Œå› ä¸ºä»£ç éƒ½æ˜¯è‡ªå·±å†™çš„ï¼Œå®šä½é—®é¢˜å<code>git blame</code>ä¸€ä¸‹å°±å¯ä»¥ç”©é”…äº†ï¼›è€Œç¨‹åºä¾èµ–é¡¹é‡Œçš„BUGåˆ™æ’æŸ¥èµ·æ¥åˆ™è®©äººä¸€ç­¹è«å±•ï¼Œå°¤å…¶æ˜¯åœ¨æ²¡æœ‰è¶³å¤Ÿå¤šä¿¡æ¯çš„æƒ…å†µã€‚</p>
<p>é¢å¯¹æ¥è‡ªå®¢æˆ·å’ŒQAçš„å‹åŠ›ï¼Œç»å°½è„‘æ±ä»æ— æ³•å®šä½é—®é¢˜å¼€å‘ä»¬åªèƒ½æ‰¾å€Ÿå£äº†ğŸ¤£</p>
<ul>
<li>Itâ€™s a feature,not a bug.</li>
<li>Thatâ€™s the design decision, so not a bug</li>
</ul>
<p>æˆ‘ä»¥å‰ä¹Ÿé‡åˆ°æ¡†æ¶å‡ºé—®é¢˜çš„æƒ…å†µï¼Œä¸è¿‡éƒ½æ˜¯è‡ªå·±æ”¹ä»£ç æ”¹å‡ºæ¥çš„ï¼Œå€’ä¹Ÿä¸æ˜¯å¾ˆéš¾æ’æŸ¥ã€‚ä½†è¿™æ¬¡æŒ–å‡ºæ¥çš„BUGå°±å®Œå…¨ä¸ä¸€æ ·äº†</p>
<a id="more"></a>
<h2 id="èƒŒæ™¯"><a href="#èƒŒæ™¯" class="headerlink" title="èƒŒæ™¯"></a>èƒŒæ™¯</h2><p>ä¸€ä¸ªWPFçš„é¡¹ç›®ï¼Œå‹‰å¼ºåœ¨deadlineä¹‹å‰èµ¶å®Œäº†åŠŸèƒ½ã€‚å‡ºäº†æ–°ç‰ˆæœ¬åæ¥åˆ°QAæŠ¥å‘Šï¼Œç¨‹åºåœ¨Windows 8.1ä¸Šæ­»äºOOM:</p>
<blockquote>
<p>System.OutOfMemoryException: Insufficient memory to continue the execution of the program.<br>   at System.Windows.Media.MediaContext.NotifyPartitionIsZombie(Int32 failureCode)<br>   at System.Windows.Media.MediaContext.NotifyChannelMessage()<br>   at System.Windows.Interop.HwndTarget.HandleMessage(Int32 msg, IntPtr wparam, IntPtr lparam)<br>   at System.Windows.Interop.HwndSource.HwndTargetFilterMessage(IntPtr hwnd, Int32 msg, IntPtr wParam, IntPtr lParam, Boolean&amp; handled)<br>   at MS.Win32.HwndWrapper.WndProc(IntPtr hwnd, Int32 msg, IntPtr wParam, IntPtr lParam, Boolean&amp; handled)<br>   at MS.Win32.HwndSubclass.DispatcherCallbackOperation(Object o)<br>   at System.Windows.Threading.ExceptionWrapper.InternalRealCall(Delegate callback, Object args, Boolean isSingleParameter)<br>   at System.Windows.Threading.ExceptionWrapper.TryCatchWhen(Object source, Delegate callback, Object args, Boolean isSingleParameter, Delegate catchHandler)<br>   at System.Windows.Threading.Dispatcher.WrappedInvoke(Delegate callback, Object args, Boolean isSingleParameter, Delegate catchHandler)<br>   at System.Windows.Threading.Dispatcher.InvokeImpl(DispatcherPriority priority, TimeSpan timeout, Delegate method, Object args, Boolean isSingleParameter)<br>   at System.Windows.Threading.Dispatcher.Invoke(DispatcherPriority priority, Delegate method, Object arg)<br>   at MS.Win32.HwndSubclass.SubclassWndProc(IntPtr hwnd, Int32 msg, IntPtr wParam, IntPtr lParam)<br>   at MS.Win32.UnsafeNativeMethods.DispatchMessage(MSG&amp; msg)<br>   at System.Windows.Threading.Dispatcher.PushFrameImpl(DispatcherFrame frame)<br>   at System.Windows.Threading.Dispatcher.PushFrame(DispatcherFrame frame)<br>   at System.Windows.Threading.Dispatcher.Run()</p>
</blockquote>
<h2 id="æ‰è™«"><a href="#æ‰è™«" class="headerlink" title="æ‰è™«"></a>æ‰è™«</h2><h3 id="å‡ºå¸ˆä¸åˆ©"><a href="#å‡ºå¸ˆä¸åˆ©" class="headerlink" title="å‡ºå¸ˆä¸åˆ©"></a>å‡ºå¸ˆä¸åˆ©</h3><p>ç¨‹åºé‡Œç”¨è‡ªå®šä¹‰çš„<code>Window Style</code>æ›¿ä»£äº†WPFè‡ªå¸¦çš„ã€‚ä½†æ˜¯è‡ªå®šä¹‰çš„<code>Window Style</code>åœ¨æœ€å¤§åŒ–çš„æ—¶å€™ä¼š<a href="https://stackoverflow.com/questions/20941443/properly-maximizing-wpf-window-with-windowstyle-none" target="_blank" rel="external">è¦†ç›–ä»»åŠ¡æ </a>ã€‚ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬ä½¿ç”¨äº†å›ç­”é‡Œè‡ªå®šä¹‰çš„æ¶ˆæ¯å¾ªç¯ã€‚çœ‹åˆ°è°ƒç”¨æ ˆé‡Œçš„<code>Hwnd</code>ï¼Œåˆæ­¥æ€€ç–‘æ˜¯è‡ªå®šä¹‰çš„æ¶ˆæ¯å¾ªç¯çš„é—®é¢˜ã€‚æŠŠæ¶ˆæ¯å¾ªç¯ç›¸å…³çš„ä»£ç æ‹¿æ‰ï¼Œé—®é¢˜ä¾æ—§ã€‚çœ‹æ¥ä¸æ˜¯æ¶ˆæ¯å¾ªç¯çš„é—®é¢˜ã€‚ä¸è¿‡ä¸ºä»€ä¹ˆæˆ‘åœ¨å¼€å‘çš„æ—¶å€™æ²¡æœ‰é‡åˆ°é—®é¢˜å‘¢ï¼Ÿ</p>
<h3 id="å¯»æ‰¾åŸå› "><a href="#å¯»æ‰¾åŸå› " class="headerlink" title="å¯»æ‰¾åŸå› "></a>å¯»æ‰¾åŸå› </h3><p>æŠŠå‡ºé—®é¢˜ç‰ˆæœ¬ç›´æ¥æ”¾åœ¨æˆ‘çš„å¼€å‘æœºä¸Šè·‘å‘ç°å¹¶æ²¡æœ‰é—®é¢˜ã€‚æ”¾åœ¨å¦ä¸€ä¸ªåŒäº‹çš„æœºå­ä¸Šä¹Ÿæ²¡é—®é¢˜ã€‚è¿™æ—¶å€™æ„è¯†åˆ°é—®é¢˜æœ‰ç‚¹è¹Šè··ã€‚ä¸€èˆ¬æ¥è¯´è¿™ç§ä¸èƒ½ç¨³å®šé‡ç°çš„é—®é¢˜éƒ½æˆ–å¤šæˆ–å°‘ä¼šå’Œå¤šçº¿ç¨‹å’Œæ­»é”æœ‰å…³ã€‚ç„¶è€Œä¸Šä¸ªç‰ˆæœ¬åˆ°è¿™ä¸ªç‰ˆæœ¬å¹¶æ²¡æœ‰å†™è¿™äº›æ–¹é¢çš„ä»£ç ã€‚è¿™æ—¶å€™å¼€å§‹æ€€ç–‘æ˜¯ç¯å¢ƒçš„é—®é¢˜äº†ã€‚æ‰¾æ¥å„ä¸ªç‰ˆæœ¬çš„Windowsï¼Œä¾æ¬¡å°è¯•åå‘ç°åªåœ¨Windows 8.1ä¸Šæœ‰é—®é¢˜ã€‚éš¾é“æ˜¯OSçš„é—®é¢˜ï¼ŸåŒäº‹æé†’äº†ä¸€å¥ï¼Œè¯´ä»¥å‰çš„ç‰ˆæœ¬æ˜¯å¯ä»¥åœ¨Windows 8.1ä¸Šæ­£å¸¸è·‘çš„ã€‚ç”¨äºŒåˆ†æ³•ï¼Œæ‰¾åˆ°äº†æœ€æ™šçš„èƒ½ç”¨çš„ç‰ˆæœ¬Bå’Œæœ€æ—©çš„ä¸èƒ½ç”¨çš„ç‰ˆæœ¬Aã€‚</p>
<h3 id="åˆå…¥å›°å¢ƒ"><a href="#åˆå…¥å›°å¢ƒ" class="headerlink" title="åˆå…¥å›°å¢ƒ"></a>åˆå…¥å›°å¢ƒ</h3><p>æŒ‰ç†è¯´ï¼Œæ‰¾åˆ°ç‰ˆæœ¬ådiffä¸‹æ”¹åŠ¨çš„ä»£ç å°±èƒ½æ¯”è¾ƒå¿«çš„å®šä½é—®é¢˜äº†ã€‚ä¸è¿‡ç°åœ¨æœ‰äº†ç¨³å®šæµ®ç°çš„ç‰ˆæœ¬Bï¼Œæˆ‘å†³å®šä»å¼‚å¸¸æœ¬èº«å…¥æ‰‹ã€‚ä¸€ç•ªæœç´¢åæ‰¾åˆ°äº†å¾®è½¯çš„ä¸€ç¯‡<a href="https://blogs.msdn.microsoft.com/dsui_team/2013/11/18/wpf-render-thread-failures/" target="_blank" rel="external">åšå®¢</a>ï¼Œå…¶ä¸­æåˆ°è¿™ä¸ªé”™è¯¯é€šå¸¸æ˜¯æ¸²æŸ“å­ç³»ç»Ÿå‡ºé—®é¢˜çš„ç—‡çŠ¶ï¼š</p>
<blockquote>
<p>â€¦ WPF render thread encountered some fatal error â€¦ Most of the time, a failure occurs when calling into DirectX/D3D â€¦ When a failure is detected, The render thread will attempt to map the failure it receives to an appropriate managed exception. The render thread only synchronizes with the UI thread in a few locations â€¦The most common locations when they synchronize are â€¦ or as a result of the UI thread handling a â€œchannelâ€ message from DirectX.</p>
<p>If a render thread failure manifests as a System.OutOfMemoryException, then the likelihood is that the render thread was a victim of the process exhausting some resource .The exhausted resource is most often available/contiguous virtual address space â€¦ It might be a situation where sometimes the WPF render thread is the victim of the resource exhaustion â€¦</p>
</blockquote>
<p>WPFé‡Œçš„æ¸²æŸ“æ˜¯ç”±éæ‰˜ç®¡çš„DirectXåšçš„ã€‚ä¸ºäº†ä»ç¨‹åºå‘˜çš„è§’åº¦éšè—æ‰æ¸²æŸ“è¿™ä¸ªè¿‡ç¨‹ï¼ŒWPFå°†è‡ªèº«æ‹†åˆ†ä¸ºä¸åŒçš„ç»„ä»¶ã€‚<code>PreserentationFramework.dll</code>å’Œ<code>PreserentationFrameworkCore.dll</code>æ˜¯ç¨‹åºå‘˜ç›´æ¥èƒ½æ¥è§¦åˆ°çš„ã€‚è¿™é‡Œå®ç°çš„æ˜¯ç»„åˆå­ç³»ç»Ÿã€‚æ¸²æŸ“å­ç³»ç»Ÿåˆ™åœ¨éæ‰˜ç®¡çš„<code>milcore.dll</code>é‡Œå®ç°ã€‚<code>System.Windows.Media.Visual</code>æ˜¯WPFç»„åˆå­ç³»ç»Ÿçš„å…¥å£ç‚¹ï¼Œå®ƒé€šè¿‡ç§æœ‰çš„é€šä¿¡åè®®ä¸<code>milcore</code>é‡Œçš„æ¸²æŸ“å­ç³»ç»Ÿé€šä¿¡ï¼Œä»è€Œå°†ç»„åˆå­ç³»ç»Ÿå’Œæ¸²æŸ“å­ç³»ç»Ÿè¿æ¥èµ·æ¥ã€‚</p>
<p>çœ‹èµ·æ¥æˆ‘ä»¬çš„ä»£ç è€—å°½äº†DirectXé‡Œè¾¹çš„æŸç§èµ„æºï¼Œä»è€Œè®©æ¸²æŸ“å¤±è´¥äº†ã€‚C#åšä¸ºä¸€ä¸ªæ‰˜ç®¡è¯­è¨€ï¼Œå±…ç„¶èƒ½æ…è¿™ä¹ˆå¤§çš„ç¯“å­ï¼Œå®Œå…¨ä¸ç§‘å­¦ã€‚è¿™ä¸ªBUGè¶Šæ¥è¶Šæœ‰æ„æ€äº†ğŸ¤”</p>
<p>æ—¢ç„¶å¼‚å¸¸ä¸Šçœ‹ä¸å‡ºæ¥ä»€ä¹ˆå¤´ç»ªé‚£å°±è¦ä»ä»£ç å…¥æ‰‹äº†ã€‚æ‰¾diffçš„æ—¶å€™å‘ç°Bç‰ˆæœ¬æ²¡æœ‰æ‰“tagã€‚</p>
<p>æ²¡æ‰“tagä¸ç®—å¤§é—®é¢˜ï¼Œå¤šèŠ±äº†äº›æ—¶é—´æˆåŠŸæ‰¾åˆ°äº†é‚£ä¸ªcommitï¼Œä½†æ˜¯å¿ƒæƒ…æœ‰ç‚¹ä¸çˆ½ã€‚</p>
<p>diffçš„ä»£ç ä¸å¤šã€‚æ’é™¤æ‰æ— å…³çš„æ–‡ä»¶å°±åªå‰©ä¸‹ä¸€äº›å¸ƒå±€æ–‡ä»¶æ¯”è¾ƒå¯ç–‘ã€‚æ”¹æµç¨‹ï¼Œä¾æ¬¡è·³è¿‡è¿™äº›é¡µé¢ï¼Œå‘ç°ä¸€è·³åˆ°ç™»å½•é¡µé¢å°±æŒ‚äº†ã€‚ç™»å½•é¡µé¢çš„diffæœ‰ç‚¹å¤šï¼ŒäºŒåˆ†åˆ é™¤å¾ˆå¿«å°±å®šä½åˆ°äº†é—®é¢˜çš„æ ¹æº:<code>ImageButton</code>ã€‚</p>
<p><code>ImageButton</code>æ˜¯ä¸ªåœ¨æ™®é€šã€é¼ æ ‡æ‚¬åœã€è¢«æŒ‰ä¸‹ä¸‰ç§ä¸åŒçŠ¶æ€æ—¶æ˜¾ç¤ºä¸åŒçš„å›¾ç‰‡çš„æŒ‰é’®ã€‚</p>
<p><code>ImageButton.cs</code>:</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">using</span> System.Windows;</div><div class="line"><span class="keyword">using</span> System.Windows.Controls;</div><div class="line"><span class="keyword">using</span> System.Windows.Media;</div><div class="line"></div><div class="line"><span class="keyword">namespace</span> <span class="title">Debugging</span></div><div class="line">&#123;</div><div class="line">    <span class="keyword">public</span> <span class="keyword">class</span> <span class="title">ImageButton</span> : <span class="title">Button</span></div><div class="line">    &#123;</div><div class="line">        <span class="keyword">public</span> ImageSource Source</div><div class="line">        &#123;</div><div class="line">            <span class="keyword">get</span> &#123; <span class="keyword">return</span> (ImageSource)GetValue(SourceProperty); &#125;</div><div class="line">            <span class="keyword">set</span> &#123; SetValue(SourceProperty, <span class="keyword">value</span>); &#125;</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">readonly</span> DependencyProperty SourceProperty =</div><div class="line">            DependencyProperty.Register(<span class="string">"Source"</span>, <span class="keyword">typeof</span>(ImageSource), <span class="keyword">typeof</span>(ImageButton), <span class="keyword">new</span> PropertyMetadata(<span class="literal">null</span>));</div><div class="line"></div><div class="line">        <span class="keyword">public</span> ImageSource MouseOverImage</div><div class="line">        &#123;</div><div class="line">            <span class="keyword">get</span> &#123; <span class="keyword">return</span> (ImageSource)GetValue(MouseOverImageProperty); &#125;</div><div class="line">            <span class="keyword">set</span> &#123; SetValue(MouseOverImageProperty, <span class="keyword">value</span>); &#125;</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">readonly</span> DependencyProperty MouseOverImageProperty =</div><div class="line">            DependencyProperty.Register(<span class="string">"MouseOverImage"</span>, <span class="keyword">typeof</span>(ImageSource), <span class="keyword">typeof</span>(ImageButton), <span class="keyword">new</span> PropertyMetadata(<span class="literal">null</span>));</div><div class="line"></div><div class="line">        <span class="keyword">public</span> ImageSource PressedImage</div><div class="line">        &#123;</div><div class="line">            <span class="keyword">get</span> &#123; <span class="keyword">return</span> (ImageSource)GetValue(PressedImageProperty); &#125;</div><div class="line">            <span class="keyword">set</span> &#123; SetValue(PressedImageProperty, <span class="keyword">value</span>); &#125;</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">readonly</span> DependencyProperty PressedImageProperty =</div><div class="line">            DependencyProperty.Register(<span class="string">"PressedImage"</span>, <span class="keyword">typeof</span>(ImageSource), <span class="keyword">typeof</span>(ImageButton), <span class="keyword">new</span> PropertyMetadata(<span class="literal">null</span>));</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p><code>ImageButton.xaml</code>:</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">ResourceDictionary</span> <span class="attr">xmlns</span>=<span class="string">"http://schemas.microsoft.com/winfx/2006/xaml/presentation"</span></span></div><div class="line"><span class="tag">                    <span class="attr">xmlns:x</span>=<span class="string">"http://schemas.microsoft.com/winfx/2006/xaml"</span></span></div><div class="line"><span class="tag">                    <span class="attr">xmlns:local</span>=<span class="string">"clr-namespace:Debugging"</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">Style</span> <span class="attr">TargetType</span>=<span class="string">"local:ImageButton"</span>&gt;</span><span class="undefined"></span></div><div class="line"><span class="xml">        <span class="tag">&lt;<span class="name">Setter</span> <span class="attr">Property</span>=<span class="string">"Template"</span>&gt;</span></span></div><div class="line"><span class="xml">            <span class="tag">&lt;<span class="name">Setter.Value</span>&gt;</span></span></div><div class="line"><span class="xml">                <span class="tag">&lt;<span class="name">ControlTemplate</span> <span class="attr">TargetType</span>=<span class="string">"local:ImageButton"</span>&gt;</span></span></div><div class="line"><span class="xml">                    <span class="tag">&lt;<span class="name">Grid</span>&gt;</span></span></div><div class="line"><span class="xml">                        <span class="tag">&lt;<span class="name">Image</span> <span class="attr">x:Name</span>=<span class="string">"image"</span> <span class="attr">Source</span>=<span class="string">"&#123;TemplateBinding Source&#125;"</span> /&gt;</span></span></div><div class="line"><span class="xml">                    <span class="tag">&lt;/<span class="name">Grid</span>&gt;</span></span></div><div class="line"><span class="xml">                    <span class="tag">&lt;<span class="name">ControlTemplate.Triggers</span>&gt;</span></span></div><div class="line"><span class="xml">                        <span class="tag">&lt;<span class="name">Trigger</span> <span class="attr">Property</span>=<span class="string">"IsMouseOver"</span> <span class="attr">Value</span>=<span class="string">"True"</span>&gt;</span></span></div><div class="line"><span class="xml">                            <span class="tag">&lt;<span class="name">Setter</span> <span class="attr">TargetName</span>=<span class="string">"image"</span> <span class="attr">Property</span>=<span class="string">"Source"</span> <span class="attr">Value</span>=<span class="string">"&#123;Binding RelativeSource=&#123;RelativeSource TemplatedParent&#125;, Path=MouseOverImage&#125;"</span> /&gt;</span></span></div><div class="line"><span class="xml">                        <span class="tag">&lt;/<span class="name">Trigger</span>&gt;</span></span></div><div class="line"><span class="xml">                        <span class="tag">&lt;<span class="name">Trigger</span> <span class="attr">Property</span>=<span class="string">"IsPressed"</span> <span class="attr">Value</span>=<span class="string">"True"</span>&gt;</span></span></div><div class="line"><span class="xml">                            <span class="tag">&lt;<span class="name">Setter</span> <span class="attr">TargetName</span>=<span class="string">"image"</span> <span class="attr">Property</span>=<span class="string">"Source"</span> <span class="attr">Value</span>=<span class="string">"&#123;Binding RelativeSource=&#123;RelativeSource TemplatedParent&#125;, Path=PressedImage&#125;"</span> /&gt;</span></span></div><div class="line"><span class="xml">                        <span class="tag">&lt;/<span class="name">Trigger</span>&gt;</span></span></div><div class="line"><span class="xml">                    <span class="tag">&lt;/<span class="name">ControlTemplate.Triggers</span>&gt;</span></span></div><div class="line"><span class="xml">                <span class="tag">&lt;/<span class="name">ControlTemplate</span>&gt;</span></span></div><div class="line"><span class="xml">            <span class="tag">&lt;/<span class="name">Setter.Value</span>&gt;</span></span></div><div class="line"><span class="xml">        <span class="tag">&lt;/<span class="name">Setter</span>&gt;</span></span></div><div class="line"><span class="undefined">    </span><span class="tag">&lt;/<span class="name">Style</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">ResourceDictionary</span>&gt;</span></div></pre></td></tr></table></figure>
<p>ç™»é™†é¡µé¢ä¸­æ˜¯è¿™æ ·ä½¿ç”¨ImageButtonçš„:<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">....</div><div class="line"><span class="tag">&lt;<span class="name">ImageButton</span> <span class="attr">Source</span>=<span class="string">"&#123;StaticResource SomeImage&#125;"</span> <span class="attr">MouseOverImage</span>=<span class="string">"&#123;StaticResouce SomeOtherImage&#125;"</span> <span class="attr">PressedImage</span>=<span class="string">"&#123;StaticResources AnotherImage&#125;"</span> /&gt;</span></div><div class="line">....</div></pre></td></tr></table></figure></p>
<p>æŠŠ<code>Source=&quot;{StaticResource SomeImage}&quot;</code>è¿™ä¸€å¥å»æ‰å°±æ­£å¸¸äº†ã€‚ä¼¼ä¹å®ƒå°±æ˜¯ç½ªé­ç¥¸é¦–ã€‚ä½†æ˜¯ï¼ŒæŠŠè¿™éƒ¨åˆ†ä»£ç å’Œå›¾ç‰‡æ‹¿å‡ºæ¥æ”¾åˆ°å¦ä¸€ä¸ªç¨‹åºé‡Œå´åˆä¸€åˆ‡æ­£å¸¸ã€‚</p>
<h3 id="è½¬æœº"><a href="#è½¬æœº" class="headerlink" title="è½¬æœº"></a>è½¬æœº</h3><p>æ¥ä¸‹æ¥åˆå°è¯•äº†</p>
<ul>
<li>æŠŠ<code>ImageButton</code>æ›¿æ¢ä¸º<code>Image</code></li>
<li>æŠŠ<code>Template.Trigger</code>å»æ‰</li>
<li>æŠŠ<code>SomeImage</code>æŒ‡å‘å…¶ä»–å›¾ç‰‡</li>
</ul>
<p>ä½†æ˜¯è¿˜æ˜¯æ‰¾ä¸åˆ°root causeã€‚ä¸€æ¨¡ä¸€æ ·çš„ä»£ç ä¸èƒ½åœ¨å…¶ä»–ç¨‹åºå¤ç°ï¼Œé‚£å°±è¯´æ˜BUGæ˜¯æˆ‘ä»¬ç¨‹åºè‡ªå·±é€ æˆçš„ã€‚ä½†æ˜¯è¿™ä¸ªBUGåªåœ¨Windows 8.1ä¸‹å‡ºç°ï¼Œè¯´æ˜è·Ÿç¯å¢ƒä¹Ÿæœ‰å¯èƒ½æœ‰å…³ç³»ã€‚è·ç¦»å‘ç°BUGå·²ç»è¿‡å»ä¸€å¤©åŠäº†ï¼Œæ”¾å¼ƒçš„è¯å®åœ¨æ˜¯ä¸ç”˜å¿ƒï¼Œæ¥ä¸‹æ¥åªèƒ½çŒœäº†ã€‚</p>
<p>å †æ ˆé‡Œæ˜¾ç¤ºç¨‹åºæŒ‚åœ¨WPFçš„ç¨‹åºé›†é‡Œï¼ŒåŸºäºè¿™ä¸ªç°è±¡å†³å®šretargetåˆ°.NET Frameworkçš„æœ€æ–°ç‰ˆæœ¬4.7.2ã€‚ç¼–è¯‘æ‰“åŒ…éƒ¨ç½²ä¸€å¥—æµç¨‹èµ°å®Œï¼Œåœ¨è¿è¡Œçš„æ—¶å€™å‘ç°Windows 8.1æ²¡æœ‰å®‰è£….NET Framework 4.7.2ã€‚å¥½å§ï¼Œé‚£å°±è£…ã€‚å¯æ˜¯å®‰è£…åŒ…å‘Šè¯‰æˆ‘ä¸æ»¡è¶³æ¡ä»¶ï¼š</p>
<p><img src="/2018/05/21/hell-mode-debugging/net472_error.png" alt="net472_requirement_not_meet"></p>
<p>éœ€è¦å®‰è£…<a href="https://support.microsoft.com/en-us/help/2919355/windows-rt-8-1-windows-8-1-and-windows-server-2012-r2-update-april-201" target="_blank" rel="external"><strong>KB2919355</strong></a>ï¼Ÿ</p>
<h3 id="å¾®è½¯æ¥èƒŒé”…"><a href="#å¾®è½¯æ¥èƒŒé”…" class="headerlink" title="å¾®è½¯æ¥èƒŒé”…"></a>å¾®è½¯æ¥èƒŒé”…</h3><p>åœ¨å¾®è½¯çš„<a href="https://support.microsoft.com/en-us/help/2919355/windows-rt-8-1-windows-8-1-and-windows-server-2012-r2-update-april-201" target="_blank" rel="external">æ”¯æŒç½‘ç«™</a>ä¸Šè¯¦ç»†åˆ—å‡ºäº†KB2919355çš„change logã€‚ä»¥<code>image</code>ä¸ºå…³é”®å­—CTRL+Få‘ç°è¿™æ ·çš„æè¿°ï¼š</p>
<blockquote>
<table>
<thead>
<tr>
<th style="text-align:center">Article number</th>
<th style="text-align:center">Article Title</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center"><a href="https://support.microsoft.com/en-us/help/2929755" target="_blank" rel="external">2929755</a></td>
<td style="text-align:center">Out of memory when you load some image resources in a Windows application</td>
</tr>
</tbody>
</table>
</blockquote>
<p>æˆ‘å»ï¼Œè¿™å°±æ˜¯æˆ‘ä»¬é‡åˆ°çš„é—®é¢˜ã€‚</p>
<p><a href="https://support.microsoft.com/en-us/help/2929755/out-of-memory-when-you-load-some-image-resources-in-a-windows-applicat" target="_blank" rel="external">å¯¹åº”çš„é¡µé¢</a>ç»™å‡ºçš„æè¿°ï¼š</p>
<blockquote>
<p><strong>Symptoms</strong></p>
<p>When you load some image resources in an application such as Microsoft Visual Studio on a computer that has Windows 8.1, Windows Server 2012 R2, Windows 8, Windows Server 2012, Windows 7, or Windows Server 2008 R2 installed, the application stops responding and memory leaks in Windows. This issue occurs after you install the following update:<br>2670838 Platform update for Windows 7 SP1 and Windows Server 2008 R2 SP1</p>
<p><strong>File Information</strong></p>
<ul>
<li>For all supported x86-based versions of Windows 8:</li>
</ul>
<table>
<thead>
<tr>
<th>File name</th>
<th style="text-align:left">File version</th>
<th style="text-align:left">File size</th>
<th style="text-align:left">Date</th>
<th style="text-align:left">Time</th>
<th style="text-align:left">Platform</th>
</tr>
</thead>
<tbody>
<tr>
<td>Windowscodecs.dll</td>
<td style="text-align:left">6.2.9200.16809</td>
<td style="text-align:left">1,339,392</td>
<td style="text-align:left">31-Jan-2014</td>
<td style="text-align:left">00:48</td>
<td style="text-align:left">x86</td>
</tr>
<tr>
<td>Windowscodecs.dll</td>
<td style="text-align:left">6.2.9200.20930</td>
<td style="text-align:left">1,319,936</td>
<td style="text-align:left">31-Jan-2014</td>
<td style="text-align:left">06:04</td>
<td style="text-align:left">x86</td>
</tr>
</tbody>
</table>
</blockquote>
<p>è¿™ä¸ªBUGæ˜¯<a href="https://support.microsoft.com/en-us/help/2670838" target="_blank" rel="external">KB2670838</a>å¼•å…¥çš„ã€‚åœ¨2670838çš„æ›´æ–°ä¸­,å¾®è½¯æ›´æ–°äº†ç°æœ‰çš„Windows Imaging Component (WIC)</p>
<blockquote>
<p>This update improves the range and performance of the following graphics and imaging components:</p>
<ul>
<li>Windows Imaging Component (WIC)</li>
</ul>
</blockquote>
<p>æˆ‘ä»¬åœ¨diffé‡Œé‡ç‚¹å…³æ³¨äº†Imageç›¸æ›´æ”¹ï¼Œå‘ç°æ”¹äº†è¿™ä¹ˆä¸€è¡Œï¼š</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">Application.Resources</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">Style</span> <span class="attr">TargetType</span>=<span class="string">"Image"</span>&gt;</span><span class="undefined"></span></div><div class="line"><span class="xml">            <span class="tag">&lt;<span class="name">Setter</span> <span class="attr">Property</span>=<span class="string">"RenderOptions.BitmapScalingMode"</span></span></span></div><div class="line"><span class="undefined">                    Value="Fant" /&gt;</span></div><div class="line"><span class="undefined">        </span><span class="tag">&lt;/<span class="name">Style</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">Application.Resources</span>&gt;</span></div></pre></td></tr></table></figure>
<p><a href="https://docs.microsoft.com/en-us/dotnet/api/system.windows.media.bitmapscalingmode?view=netframework-4.7.2" target="_blank" rel="external">RenderOptons.BitmapScalingMode</a>æŒ‡æ˜åœ¨éœ€è¦ç¼©æ”¾æ—¶ä½¿ç”¨çš„ç®—æ³•ã€‚<code>Fant</code>æ˜¯è´¨é‡æœ€é«˜çš„ä¸€ç§ä¹‹ä¸€ã€‚å°è¯•<code>Fant</code>æ”¹ä¸º<code>Linear</code>åç¨‹åºæ­£å¸¸è¿è¡Œã€‚ç»§ç»­å°è¯•å…¶ä»–çš„å€¼ï¼Œå‘ç°é™¤äº†<code>Linear</code>å’Œ<code>Unspecified</code>éƒ½ä¼šå´©æºƒã€‚</p>
<h2 id="åŸå› åˆ†æ"><a href="#åŸå› åˆ†æ" class="headerlink" title="åŸå› åˆ†æ"></a>åŸå› åˆ†æ</h2><p>åœ¨KB2670838é‡Œçš„WICåœ¨ç‰¹å®šæƒ…å†µä¼šOOMçˆ†æ‰ã€‚WPFé‡Œçš„<code>BitmapScalingMode.Fant</code>ä¾èµ–WICå®ç°ï¼Œåœ¨è£…äº†KB2670838çš„ç¯å¢ƒé‡Œè·Ÿå°±ä¼šè·ŸWICä¸€èµ·OOMçˆ†æ‰ï¼›å¾®è½¯åœ¨åæ¥å‘è¡Œçš„KB2919355ä¸­ä¿®å¤äº†è¿™ä¸ªBUGã€‚</p>
<p>æˆ‘ä»¬çš„æµ‹è¯•æœºçš„Windowsç³»ç»Ÿç”±RTMçš„é•œåƒå®‰è£…å¹¶ä¸”å…³é—­äº†è‡ªåŠ¨æ›´æ–°ã€‚åœ¨Windows 8.1ä¹‹å‰çš„RTMé•œåƒæ²¡æœ‰è‡ªå¸¦KBB2670838ï¼Œåœ¨Windows 8.1ä¹‹åRTMé•œåƒè‡ªå¸¦äº†KB2919355ã€‚ååè¿™ä¸ªWindows 8.1çš„RTMé•œåƒå†…ç½®äº†KB2670838è€Œæ²¡æœ‰å†…ç½®KB2919355ï¼Œç¨‹åºå°±è¿™æ ·æ­»äºOOMã€‚</p>
<p>éªŒè¯Windowscodecs.dllçš„ç‰ˆæœ¬ä¹Ÿæ”¯æŒè¿™ä¸ªç»“è®ºã€‚</p>
<h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><ul>
<li>å®šä½ç¯å¢ƒé—®é¢˜çš„æ—¶å€™è¦æ§åˆ¶å˜é‡</li>
<li>äºŒåˆ†æ³•èƒ½å¿«é€Ÿå®šä½å‡ºé”™çš„ä½ç½®</li>
<li>æ‰“å¥½Tagå¾ˆé‡è¦</li>
<li>ä¸€ç›´ä»¥æ¥ä¾èµ–çš„åº•å±‚ä¹Ÿä¼šæœ‰BUGã€‚å¤§èƒ†è´¨ç–‘ï¼Œå°å¿ƒæ±‚è¯ã€‚</li>
</ul>
<p><del>è¯¥ç”©é”…çš„æ—¶å€™è¦æœæ–­çš„ç”©ç»™å¾®è½¯</del></p>
<h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><p><a href="https://docs.microsoft.com/en-us/dotnet/framework/wpf/advanced/wpf-architecture#systemwindowsmediavisual" target="_blank" rel="external">WPF Architecture - docs.microsoft.com</a></p>
<p><a href="https://social.msdn.microsoft.com/Forums/en-US/2ca9e3d5-06b9-4ca0-b5e0-0a42d54cd926/wpf-tooltip-rendering-issue-application-hang?forum=wpf" target="_blank" rel="external">WPF ToolTip Rendering Issue : Application Hang - social.msdn.microsoft.com</a></p>
<p><a href="https://support.microsoft.com/en-us/help/2919355/windows-rt-8-1-windows-8-1-and-windows-server-2012-r2-update-april-201" target="_blank" rel="external">Windows RT 8.1, Windows 8.1, and Windows Server 2012 R2 update: April 2014 - support.microsoft.com</a></p>
<p><a href="https://support.microsoft.com/en-us/help/2670838/platform-update-for-windows-7-sp1-and-windows-server-2008-r2-sp1" target="_blank" rel="external">Platform update for Windows 7 SP1 and Windows Server 2008 R2 SP1 - support.microsoft.com</a></p>
<p><a href="https://msdn.microsoft.com/library/windows/desktop/ee719902.aspx" target="_blank" rel="external">Windows Imaging Component - msdn.microsoft.com</a></p>

  	</div>
	  
	  <div class="article-tags tags">
      
        <a href="/tags/C/">C#</a>
      
        <a href="/tags/WPF/">WPF</a>
      
        <a href="/tags/Debugging/">Debugging</a>
      
	  </div>
    
		
	
		<div class="art-item-footer">
				
					<span class="art-item-left"><i class="icon icon-chevron-thin-left"></i>prevï¼š<a href="/2018/07/12/program-upon-abstractions/" rel="prev"  title="é¢å‘æŠ½è±¡ç¼–ç¨‹">
						é¢å‘æŠ½è±¡ç¼–ç¨‹ 
					</a></span>
				
				
					<span class="art-item-right">nextï¼š<a href="/2018/03/08/closure-and-re-entrance/" rel="next"  title="é—­åŒ…ï¼Œå˜é‡æ•è·ä¸é‡å…¥é—®é¢˜">
						é—­åŒ…ï¼Œå˜é‡æ•è·ä¸é‡å…¥é—®é¢˜
					</a><i class="icon icon-chevron-thin-right"></i></span>
				
		</div>
	
	</section>
	
		<section id="comments">
			<div id="gitment_thread"></div>
			<link rel="stylesheet" href="https://imsun.github.io/gitment/style/default.css">
			<script src="https://imsun.github.io/gitment/dist/gitment.browser.js"></script>
			<script>
					var gitment = new Gitment({
							id: 'è®°ä¸€æ¬¡æ„‰(dan)å¿«(teng)çš„æ‰è™«',
							owner: 'verrickt',
							repo: 'verrickt.github.io',
							oauth: {
									client_id: '9a5cc0fe7b4e920d91f3',
									client_secret: 'ae774015efba47b603a7c6540c276f744e32e07d',
							},
					})
					gitment.render('comments')
			</script>
		</section>
	
</article>
<script>
	window.subData = {
		title: 'è®°ä¸€æ¬¡æ„‰(dan)å¿«(teng)çš„æ‰è™«',
		tools: true
	}
</script>

      </div>
      <aside class='l_side'>
        
  <section class='m_widget about'>

<img class='avatar waves-image' src='https://avatars0.githubusercontent.com/u/11483783' />

<div class='header'>Verrickt</div>
<div class='content'>
<div class='desc'>Von as a programmer</div>
</div>
</section>

  <section class='m_widget links'>
<div class='header'>Links</div>
<div class='content'>
    <ul class="entry">
    
        <li><a class="flat-box" target="_blank" href="https://sjx1995.github.io">
            <div class='name'>Sunly</div>
        </a></li>
    
    </ul>
</div>
</section>

  <section class='m_widget categories'>
<div class='header'>Categories</div>
<div class='content'>
    
    <ul class="entry">
    
        <li><a class="flat-box" href="/categories/FluentTreeView/"><div class='name'>FluentTreeView</div><div class='badget'>5</div></a></li>
    
    </ul>
    
</div>
</section>

  
<div class="m_widget tagcloud">
    <div class="header">Tags</div>
    <div class='content'>
        <a href="/tags/Net-Framework/" style="font-size: 14px; color: #808080">.Net Framework</a> <a href="/tags/C/" style="font-size: 20px; color: #000">C#</a> <a href="/tags/Debugging/" style="font-size: 14px; color: #808080">Debugging</a> <a href="/tags/HttpClient/" style="font-size: 14px; color: #808080">HttpClient</a> <a href="/tags/MSBuild/" style="font-size: 14px; color: #808080">MSBuild</a> <a href="/tags/OOP/" style="font-size: 14px; color: #808080">OOP</a> <a href="/tags/PAT/" style="font-size: 20px; color: #000">PAT</a> <a href="/tags/Parser/" style="font-size: 14px; color: #808080">Parser</a> <a href="/tags/Reentrance/" style="font-size: 14px; color: #808080">Reentrance</a> <a href="/tags/SOLID/" style="font-size: 14px; color: #808080">SOLID</a> <a href="/tags/WPF/" style="font-size: 17px; color: #404040">WPF</a> <a href="/tags/async-await/" style="font-size: 14px; color: #808080">async/await</a> <a href="/tags/lambda/" style="font-size: 14px; color: #808080">lambda</a> <a href="/tags/overhead/" style="font-size: 14px; color: #808080">overhead</a> <a href="/tags/reference-type/" style="font-size: 14px; color: #808080">reference type</a>
    </div>
</div>



      </aside>
      <script>setLoadingBarProgress(60);</script>
    </div>
  </div>
  <footer id="footer" class="clearfix">

  <div class="social-wrapper">
    
      
        <a href="https://github.com/verrickt" class="social github" target="_blank" rel="external">
          <span class="icon icon-github"></span>
        </a>
        
        <a href="https://twitter.com/verrickt" class="social twitter" target="_blank" rel="external">
          <span class="icon icon-twitter"></span>
        </a>
        
        <a href="/atom.xml" class="social rss" target="_blank" rel="external">
          <span class="icon icon-rss"></span>
        </a>
        
          
  </div>

  <div>(c) 2017-2018 by verrickt, all right reserved. Powered by
    <a href="https://hexo.io/" class="codename">Hexo</a>. Theme by
    <a href='https://github.com/stkevintan/hexo-theme-material-flow' class="codename">MaterialFlow</a>
    <div>
      <a href="https://creativecommons.org/licenses/by-sa/4.0/" target="_blank">
        <img style="vertical-align: middle" alt="graphical represerentaion of CC BY-SA license" src="https://licensebuttons.net/l/by-sa/3.0/88x31.png"
          height="24.75" width="66">
      </a>
      <span>
        Unless explicitly stated, contents of this blog are licensed under
        <a href="https://creativecommons.org/licenses/by-sa/4.0/" class="codename" target="_blank">CC BY-SA</a>
      </span>
    </div>
</footer>
  <script>setLoadingBarProgress(80);</script>
  

<script src="//apps.bdimg.com/libs/jquery/2.1.4/jquery.min.js"></script>
<script src='//cdn.bootcss.com/node-waves/0.7.5/waves.min.js'></script>
<script src="//cdn.bootcss.com/scrollReveal.js/3.3.2/scrollreveal.min.js"></script>
<script src="/js/jquery.fitvids.js"></script>
<script>
	var GOOGLE_CUSTOM_SEARCH_API_KEY = "";
	var GOOGLE_CUSTOM_SEARCH_ENGINE_ID = "";
	var ALGOLIA_API_KEY = "";
	var ALGOLIA_APP_ID = "";
	var ALGOLIA_INDEX_NAME = "";
  var AZURE_SERVICE_NAME = "";
  var AZURE_INDEX_NAME = "";
  var AZURE_QUERY_KEY = "";
  var BAIDU_API_ID = "";
  var SEARCH_SERVICE = "hexo";
  var ROOT = "/"||"/";
  if(!ROOT.endsWith('/'))ROOT += '/';
</script>
<script src="/js/search.js"></script>
<script src="/js/app.js"></script>


  <script>setLoadingBarProgress(100);</script>
</body>
</html>
